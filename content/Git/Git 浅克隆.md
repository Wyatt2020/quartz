---
created: 2024-07-22 21:49
modified: 2024-07-22 21:49
tags:
  - Git
---

当你想要克隆一个仓库，但是不需要历史记录，可以使用如下命令：

```bash
git clone --depth 1 [仓库链接]
```

优点：
- **速度快**：由于不需要下载完整的提交历史，克隆过程会非常迅速。
- **节省空间**：仓库只包含最新的快照，所以占用的磁盘空间会少很多。
- **减少带宽消耗**：在带宽受限的环境中，浅克隆可以显著减少数据传输量。

缺点：
- **无法访问完整的历史**：如果你需要查看或恢复旧版本的代码，浅克隆的仓库将无法满足需求。
- **合并（merge）和重置（reset）限制**：浅克隆的仓库在进行某些操作时会受到限制，比如你不能使用 `git merge` 或 `git reset --hard` 到一个不在浅克隆范围内的提交。
- **推送（push）限制**：你不能从浅克隆的仓库向远程仓库推送更改，因为 Git 会检测到这是一个浅克隆。

浅克隆最适合以下场景：
- 当你需要快速获取仓库的最新状态进行构建或测试。
- 当你在一个资源受限的环境中，比如持续集成（CI）服务器，需要快速获取代码并构建。
- 当你只是想浏览代码或进行简单的修改，而不打算贡献回原始仓库。

---

将一个浅克隆转换为一个完整的克隆：

```bash
git fetch --unshallow
```

这条命令会从远程仓库下载所有缺失的提交历史，并将其合并到本地仓库中。执行完后，你的克隆仓库将不再是浅克隆，而是包含了完整的提交历史。